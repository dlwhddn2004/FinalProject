<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="interview">
	<typeAlias alias="CalendarVO" type="kr.or.ddit.vo.CalendarVO"/>
	
	<!-- 신청자 명단 -->
	<select id="selectNotConfirmApplyList" parameterClass="map" resultClass="java.util.HashMap">
		SELECT MEMBER.MEM_ID MEM_ID,
		       MEMBER.CATEGORY_NO CATEGORY_NO,
		       NOTIFICATION_NO,
		       MEM_PASS,
		       MEM_NAME,
		       MEM_MAIL,
		       MEM_ADDR,
		       MEM_TEL,
		       MEM_BANKNO,
		       MEM_BUSINESSNO,
		       MEM_IDENTITYAUTHENTICATION,
		       MEM_BIR,
		       MEM_BANKNAME,
		       MEM_BANK,
		       MEM_WORKSTATUS,
		       MEM_NOTICE,
		       PROJECT_NO,
		       APPLY_DATE,
		       APPLY_STATUS,
		       PROFILE_SEQ,
		       PROFILE_SAVENAME,
		       PROFILE_REALNAME,
		       PROFILE_CONTENTTYPE,
		       PROFILE_SIZE,
		       PROFILE_REGDATE,
		       PROFILE_DOWNHIT,
		       MYPAGE_NO,
		       MYPAGE_FAVAORITEJOB,
		       MYPAGE_INTERESTS,
		       MYPAGE_AVALIABLEDATE,
		       MYPAGE_ACTIVITYPOSSIBILITY,
		       MYPAGE_ABOUTME,
		       MYPAGE_TECHNOLOGIES,
		       MYPAGE_TECHWORKMANSHIP,
		       MYPAGE_TECHEXPERIENCE
		FROM MEMBER,
		     PROJECT_APPLY,
		     PROFILE_FILE,
		     MYPAGE_DEVELOPER
		WHERE MEMBER.MEM_ID = PROJECT_APPLY.MEM_ID
		  AND MEMBER.MEM_ID = PROFILE_FILE.MEM_ID
		  AND MEMBER.MEM_ID = MYPAGE_DEVELOPER.MEM_ID
		  AND (PROJECT_NO = 1
		    AND APPLY_STATUS = 'N')
	</select>
	
	<select id="infographic" parameterClass="map" resultClass="java.util.HashMap">
		SELECT MEMBER.MEM_ID MEM_ID,
		       MEMBER.CATEGORY_NO CATEGORY_NO,
		       NOTIFICATION_NO,
		       MEM_PASS,
		       MEM_NAME,
		       MEM_MAIL,
		       MEM_ADDR,
		       MEM_TEL,
		       MEM_BANKNO,
		       MEM_BUSINESSNO,
		       MEM_IDENTITYAUTHENTICATION,
		       MEM_BIR,
		       MEM_BANKNAME,
		       MEM_BANK,
		       MEM_WORKSTATUS,
		       MEM_NOTICE,
		       PROFILE_SEQ,
		       PROFILE_SAVENAME,
		       PROFILE_REALNAME,
		       PROFILE_CONTENTTYPE,
		       PROFILE_SIZE,
		       PROFILE_REGDATE,
		       PROFILE_DOWNHIT,
		       MYPAGE_NO,
		       MYPAGE_FAVAORITEJOB,
		       MYPAGE_INTERESTS,
		       MYPAGE_AVALIABLEDATE,
		       MYPAGE_ACTIVITYPOSSIBILITY,
		       MYPAGE_ABOUTME,
		       MYPAGE_TECHNOLOGIES,
		       MYPAGE_TECHWORKMANSHIP,
		       MYPAGE_TECHEXPERIENCE
		FROM MEMBER,
		     PROFILE_FILE,
		     MYPAGE_DEVELOPER
		WHERE MEMBER.MEM_ID = PROFILE_FILE.MEM_ID
		  AND MEMBER.MEM_ID = MYPAGE_DEVELOPER.MEM_ID
		  AND (MEMBER.MEM_ID = #mem_id#)
	</select>
	
	<select id="selectConfirmApplyList" parameterClass="map" resultClass="java.util.HashMap">
		SELECT MEMBER.MEM_ID MEM_ID,
		       CATEGORY_NO,
		       NOTIFICATION_NO,
		       MEM_PASS,
		       MEM_NAME,
		       MEM_MAIL,
		       MEM_ADDR,
		       MEM_TEL,
		       MEM_BANKNO,
		       MEM_BUSINESSNO,
		       MEM_IDENTITYAUTHENTICATION,
		       MEM_BIR,
		       MEM_BANKNAME,
		       MEM_BANK,
		       MEM_WORKSTATUS,
		       MEM_NOTICE,
		       PROJECT_NO,
		       APPLY_DATE,
		       APPLY_STATUS
		FROM MEMBER,
		     PROJECT_APPLY
		WHERE MEMBER.MEM_ID = PROJECT_APPLY.MEM_ID
		AND (PROJECT_NO = #project_no#
		AND APPLY_STATUS = 'Y')
	</select>

	<!-- 면접 캘린더 -->
	<select id="selectInterviewCalendar" parameterClass="map" resultClass="CalendarVO">
		SELECT *
		FROM CALENDAR_INTERVIEW
		WHERE PROJECT_NO = #project_no#
	</select>
	
	<insert id="insertInterviewCalendar" parameterClass="map">
		<selectKey keyProperty="id" resultClass="String">
			SELECT INTERVIEW_CALENDAR_SEQ.nextval
			FROM DUAL
		</selectKey>
		INSERT INTO CALENDAR_INTERVIEW (PROJECT_NO,
		                                ID,
		                                TITLE,
		                                "START",
		                                END,
		                                ALLDAY,
		                                CLASSNAME,
		                                DESCRIPTION)
		VALUES (#project_no#,
		        #id#,
		        #title#,
		        #start#,
		        #end#,
		        #allday#,
		        #className#,
		        #description#)
	</insert>
	
	<select id="selectMemberInfo" parameterClass="map" resultClass="java.util.HashMap">
		SELECT *
		FROM MEMBER
		WHERE MEM_ID = #mem_id#
	</select>
	
	<update id="modifyInterviewCalendar" parameterClass="map">
		UPDATE CALENDAR_INTERVIEW SET TITLE = #title#,
		                              "START" = #start#,
		                              END = #end#,
		                              CLASSNAME = #className#,
		                              DESCRIPTION = #description#
		WHERE ID = #id#
	</update>
	
	<delete id="deleteInterviewCalendar" parameterClass="map">
		DELETE CALENDAR_INTERVIEW WHERE ID = #id#
	</delete>

</sqlMap>

 


